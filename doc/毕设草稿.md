# 摘要（黑体三号字居）

伴随着信息技术的高速发展，电子投票协议和电子投票系统应运而生，在密码学的基础上并得到了快速发展。早期的电子投票系统解决了传统投票场景中效率低下、资源浪费和环境污染等问题，但同时也带来了新的问题，例如投票系统的安全性不高，也不能保证投票过程的公平、公正和公开，以致电子投票不能得到人们的信任难以推广使用。如果想要解决可信的问题，还需要借助第三方信任机构，不但麻烦而且提高了投票系统的运行成本。为了解决以上出现的问题，本论文将深入研究区块链技术，深入以太坊技术，设计一种新的投票协议，并用以太坊智能合约实现这种投票协议。本论文将分析投票场景的需求，设计安全高效的投票协议，然后梳理投票的每一个流程，并使用solidity编程语言实现设计好的投票协议。接下来把编写好的智能合约部署到本地以太坊测试网络，并编写好可视化网页交互界面，针对系统做单元测试和功能测试，增强程序的可靠性和正确性。本论文致力于在以太坊之上开发了一种新的投票系统，借助以太坊分布式去中心化、永久保存不可篡改等特性，防止投票系统数据被伪造和篡改，保证新投票系统具有安全可信的特性。本论文设计的投票系统是在区块链中分布式应用开发的一种尝试，充分发挥区块链的特性，方便人们在生活中的投票场景，希望这种尝试能给能多人启发，能加速区块链技术的发展和落地。

关键词：电子投票，区块链，密码学，智能合约


With the rapid development of information technology, electronic voting protocols and electronic voting systems have emerged at the historic moment, and have developed rapidly on the basis of cryptography. The early electronic voting system solved the problems of inefficiency, waste of resources and environmental pollution in traditional voting scenarios, but it also brought new problems, such as the low security of the voting system and the inability to guarantee the fairness and justice of the voting process And public, so that electronic voting can not get people's trust is difficult to promote. If you want to solve the credible problem, you also need to rely on a third-party trust agency, which is not only troublesome but also increases the operating cost of the voting system. In order to solve the above problems, this paper will deeply study the blockchain technology, in-depth Ethereum technology, design a new voting protocol and use the Ethereum smart contract to implement this voting protocol. This paper will analyze the requirements of the voting scenario, design a safe and efficient voting protocol and then comb through each voting process, and use the solidity programming language to implement the designed voting protocol. Next, deploy the written smart contract to the local Ethereum test network, and write a visual web interface to do unit testing and functional testing of the system to enhance the reliability and correctness of the program. This paper is devoted to the development of a new voting system on top of Ethereum. With the help of Ethereum's distributed decentralization and permanent preservation of non-tampering features, the voting system data is prevented from being forged and tampered, and the new voting system is safe The characteristics of the letter. The voting system designed in this paper is an attempt to develop distributed applications in the blockchain. It fully utilizes the characteristics of the blockchain and facilitates people's voting scenarios in life. I hope this attempt can enlighten many people and can Accelerate the development and landing of blockchain technology.

Keyword:E-voting，Blockchain，Cryptography，Smart Contract

# 目录设计


- 1 引言
    - 1.1 区块链课题背景
    - 1.2 研究目的和意义
    - 1.3 国内外研究现状
    - 1.4 本论文组织结构
- 2 相关基础知识
    - 2.1 区块链基础简介
        - 2.1.1 区块链结构
        - 2.1.2 p2p网络
        - 2.1.3 分布式存储
    - 2.2 密码学技术简介
        - 2.2.1 对称加密算法
        - 2.2.2 非对称算法
        - 2.2.3 哈希函数
        - 2.2.4 密码学技术的发展
    - 2.3 共识算法
        - 2.3.1 PoW
        - 2.3.2 PoS
        - 2.3.3 PBFT
    - 2.4 区块链技术的发展
        - 2.4.1 区块链1.0
        - 2.4.2 区块链2.0
        - 2.4.3 区块链3.0
- 3 区块链2.0-以太坊
    - 3.1 以太坊账户
    - 3.2 以太币和燃料
    - 3.3 智能合约
    - 3.4 以太坊虚拟机
    - 3.5 以太坊技术的展望
- 4 系统设计与开发
    - 4.1 投票需求分析
    - 4.2 系统基础架构
    - 4.3 投票协议设计
    - 4.4 投票系统流程
        - 4.4.1 创建投票工程流程
        - 4.4.2 购买权重流程
        - 4.4.3 投票流程
    - 4.5 系统开发实践
        - 4.5.1 开发工具及环境
        - 4.5.2 solidity智能合约编写
        - 4.5.3 truffle开发框架
        - 4.5.4 以太坊API-web3.js 
        - 4.5.5 前端网页开发
- 5 系统展示和测试
    - 5.1 系统展示
        - 5.1.1 创建模块
        - 5.1.2 投票模块
        - 5.1.3 投票详情
        - 5.1.4 权重购买
        - 5.1.5 投票历史
    - 5.2 自动单元测试
    - 5.3 功能测试
        - 5.3.1 创建投票工程测试
        - 5.3.2 权重购买测试
        - 5.3.3 投票测试
- 6 总结与展望
    - 6.1 总结
    - 6.2 展望

---

# 1 引言

## 1.1 电子投票课题背景

为了体现民主，很多集体的决策往往都是通过投票来表决的，最常见的形式是集体经过讨论或者辩论后，通过纸张上标示出投票者的立场，然后投交给机票者或者机票机构统计票数然后得出结果。自从前6世纪古希腊的雅典民主以来，投票选举一直是体现民主的重要形式。根据文献的记载，在雅典最早出现的投票应用是陶片放逐制，只不过这种投票的“当选”是负面性的，因为市民投票的结果可以决定驱逐哪个市民离开。不过现代中投票的“当选”往往是正面性的，在一些民主国家里，选民往往都是使用投票的形式来产生，选出代表他们的议员或公职人员。

每一个人通过选票表达支持或反对某一意见或候选人。投票通常采取不记名投票的办法，投票者无需披露政治取向。但是，有选举的国家不一定代表是民主国家，一些极权国家的“选举”，可能受统治阶层严格管控，候选人也可能是内定的，并没有真正的竞争可言，而且亦可能只有很少人有权投票。有些国家（例如澳大利亚、新加坡、巴西、朝鲜）强制人民在国会选举中必须投票，否则会面临处罚。此外，在投票中行贿或受贿以达到影响他人投票的取向通常是违法的。

随着信息技术不断发展，借助信息技术，高效快速特点，它同样也被使用到了投票上。早在互联网诞生之前的1981年，Chaum[1]发表了世界上第一个电子投票协议，次协议为匿名传播研究奠定了基础。在此之后，伴随着互联网的快速发展，有很多侧重点不同、极具创新性的电子投票方案不断的涌现出来。但是这些方案的最终目的都是为了使投票系统更加的公开、安全和高效。经过长时间的迭代和发展，部分设计成熟的投票 方案也得到了较为广泛的应用。

## 1.2 研究目的和意义

在传统形式中，通过线下投票来决策或者选举虽然是个不错的方式，但是也存在很多问题。比如：

1. 存在很多暗箱操作的现象，导致结果不可信。
2. 需要借助纸张作为媒介来记录投票过程和结果，浪费资源，不利于环境。
3. 投票过程需要借助人工来收集、整理和统计，浪费人力资源。
4. 投票结果需要人为计算，计算的结果可能有错误，或者结果出现篡改的现象。

针对以上传统投票中所暴露的问题，人们更愿意选择线上投票，所以基于信息技术的新式线上投票方案得到了大力的发展。

前人设计了各种不同的投票协议和系统，例如：基于零知识证明的投票协议，基于环签名的投票协议，基于盲签名的投票协议等等。但是以上协议都或多或少的存在一些问题，比如：基于零知识证明的投票协议，由于零知识证明过程效率很低,极大的制约了选举的效率,并不适用于全国性大选这样的大规模选举。

由于区块链技术的快速发展和区块链本身去中心化的特性，便有人提出了在区块链之上构建投票系统的想法。因为区块链技术本身的安全、公开透明、可追溯的特点，这种基于区块链技术的去中心化投票系统备受关注。

本论文旨在充分利用区块链技术的去中心化、数据不可篡改、安全可信的特点，设计一个数据安全的去中心化投票系统，保证其投票结果公正、公平、可信。


## 1.3 国内外研究现状

1981年，Chaum[1]发表了世界上第一个电子投票协议，对电子投票场景进行了规范。1982年，Merrit[2]设计提出了无可信第三方投票系统，该系统基于公钥密码学的技术，应用盲签名算法对通信的数据和信息进行加密，对投票信息和投票人进行隐藏。1992年，Fujioka等，提出的FOO电子投票协议[3]，最早的大规模使用的基于盲签名、群签名、代理签名算法的投票协议[4,5]，具有十分重要意义。2004年，苏云学等，利用ELGamal加密体制设计了一个简单高效且无需中央机构的电子投票协议。在该协议中，所有的投票者共同生成一个密钥，并用该密钥加密选票，使选票内容保密。在投票时，投票者利用不可区分的知识证明来保证选票的有效性与隐匿用户的选择。投票结果由投票者们共同确定，而且该结果是可公开可验证的。2015年，由Zhao和Chan等人[6]提出了一种新的投票协议，该协议结合了时下最流行全球的比特币技术，并且在该协议中奖惩制度就被引入了进来，放到现在来看这个协议虽然还有不足之处，这个协议却是第一个把区块链技术和投票结合到一起的想法。直到2017年，McCorry[7]等人，首次提出了以以太坊为基础架构的投票系统，该系统能高效的自我计票。利用以太坊的特性在其之上开发智能合约，智能合约自主的运行在整个以太坊网络之上，不借助第三方信任机构，可保障投票公平公正的运行。但是该方案只能有两个候选人，这是最大的缺陷。

2016年，中国工信部发布了《中国区块链技术和应用发展白皮书 2016》[8]，为国内区块链行业的发展提供了指导方针和增添了强大动力。2016年6月1日,中国互联网金融协会成立区块链研究工作组。同年7月，蚂蚁金服启用了基于区块链技术的支付宝爱心捐助平台。同年8月，工信部联合蚂蚁金服、万向控股、微众银行和平安保险等发布了《中国区块链技术和应用白皮书》，旨在研究并推动区块链技术的发展。2017年，重庆市经信委发布的《关于加快区块链产业培育及创新应用的意见》，提出到2020年，力争全市打造2-5个区块链产业基地，引进和培育区块链国内细分领域龙头企业10家以上、有核心技术或成长型的区块链企业50家以上，引进和培育区块链中高级人才500名以上，初步形成国内重要的区块链产业高地和创新应用基地。2019年中国人民银行第三季消息，支付结算司副司长穆长春8月10日在金融四十人伊春论坛上介绍央行法定数字货币的实践DC/EP（DC，digital currency，数字货币；EP，electronic payment，电子支付）时揭露央行DC/EP研究已进行五年，表明可能存在被称为“央行数字货币”的制度。2019年10月24日，中共中央政治局就区块链技术发展现状和趋势进行第十八次集体学习，会上中共中央总书记习近平表示“区块链技术的集成应用在新的技术革新和产业变革中起着重要作用”，作为中共最高领导人的总书记很少对特定技术发表谈话，另一次是提到人工智能。

不管是从技术层片还是政府政策层面都能肯定未来一定会拥抱区块链这个技术，当今正处于区块链技术发展的高速时期，我们应该把握时代机会，大力发展区块链技术，为社会，为人类的生活生产带来便利与安全。

## 1.4 本论文组织结构

本文使用以太坊为基础架构，使用以太坊中的智能合约来构造投票协议，系统不需要借助第三方信任机构，公开透明。同时兼具良好的用户体验，使得用户的操作变得更加高效和安全。本文共包括六章，每章节的主要内容为：


* 第一章，引言。本章节开始阐述了投票的由来，即电子投票的由来。罗列了传统投票存在的问题，电子投票很好的解决了其中部分问题，表达了本文研究的目的和意义：充分利用区块链技术的去中心化、数据不可篡改、安全可信的特点，设计一个数据安全的去中心化投票系统，保证其投票结果公平、公正，可信。接下来介绍了国内外电子投票的发展，开始把区块链技术和电子投票进行结合，同时展示了区块链技术在国内的快速发展和中央对区块链技术的重视。最后介绍了本论文的组织结构。

* 第二章，相关基础知识。本章节一开始先介绍了区块链的基础介绍，梳理区块链技术的基本技术，比如：区块链结构、p2p网络，分布式存储等等。查阅资料我们可以知道区块链(blockchain) 属于密码学的应用，所以了解清楚基本的密码学基础知识是必要的。本章中接下来介绍了密码学技术中的对称加密算法、非对称算法、哈希函数和密码学技术的发展。最后介绍了分布式领域最大的难题一致性问题，在区块链领域我会常会叫做共识算法。我们分别介绍了最常见的三大共识算法：PoW、PoS和PBFT。

* 第三章，区块链2.0-以太坊。本论文设计的基于区块链的投票系统将基于以太坊公链进行开发，在本章节会一次介绍以太坊中有别于比特币的高级特性。首先介绍以太坊中不同的两类账户，以及以太坊账户和比特币地址不同的运行原理，接下来介绍了以太币和燃料，以太币用于奖励矿工挖矿，燃料用来支付智能合约的运行成本。接下来介绍以太坊中最核心的功能--智能合约，当然，智能合约是需要运行环境的，后面会介绍智能合约的运行环境以太坊虚拟机。最后简述以太坊技术的发展展望。

* 第四章，提供设计和开发。本章节会从软件工程的流程去展示本论文设计的投票系统，首先进行投票系统的需求分析，设计整体的系统基础架构，设计投票协议，接下来用流程图展示系统的运行流程。最后动手实践，先选择基本的开发环境和工具，编写以太坊智能合约，使用truffle框架对智能合约进行部署加上web3.js调用智能合约，最后开发用户图形化交互网页。

* 第五章，系统展示和测试。第四章中已经完成了投票系统的开发和设计，在本章中先展示开发好的系统，分别展示创建模块、投票模块、投票详情、权重购买和投票历史。在创建模块里面，每个用户都可以通过这个模块创建新的投票项目，然后别人就可以参与到这个投票项目中。当投票项目已经存在后，可以查看投票项目的详情，购买想要投票的权重，通过投票模块就可以给候选人投票了。接下来就是对投票系统的测试了，首先对项目进行单元测试之后再对系统进行功能测试。单元测试是直接使用truffle框架自带的测试功能进行编写测试项，系统的功能测试直接使用编写好的图形化交互界面进行手动测试，分别测试：创建投票功能，权重购买和投票测试。

* 第六章，总结与展望。在最后一章中对本论文中所做的所有工作进行总结，然后反思在毕业设计中做得不够好的方面，针对这些反面下一步需要进行怎样的改进，最后展望区块链技术的发展前景，希望区块链技术得到快速发展，为人类设计提供能安全快捷的解决方案。

# 2 相关基础知识

## 2.1 区块链基础简介

随着信息社会的快速发展，需要归集和处理、分析的信息和数据量越来越大，越来越多的人认识到，单靠某个单位或机构的电脑设备将越来越难以胜任，而且每台电脑设备都存在很大的甬余，存在白天和晚上以及季节性的运行高峰与低谷，在全球范围内就形成电脑设备资源的巨大浪费，但在互联网发达的情况下，完全有可能实现电脑设备（计算机）的互联共享，从而有效利用社会资源，减少资源浪费，更好地满足信息化发展需要。于是，从上世纪末开始，就出现了很多关于计算机联网运行的探索和尝试。

随着技术演进，摩尔定律导致了整个分布式计算和分布式存储成本正在逐渐降低。在某些领域，分布式架构的效率和成本比中心化更有优势，在这样的历史背景之下。2008年，一位化名为中本聪的人，在一篇名为《比特币：一个点对点的电子现金系统》[9]的论文中首先提出了比特币和区块链的概念。中本聪结合以前的多个数字货币发明，如B-money和HashCash，创建了一个完全去中心化的电子现金系统，这个系统去中心化的运行着，并有共识规则，形成交易公开、信息透明、便于核查，以及分布式存储和处理、全网全程加密，防止信息篡改造假、维护信息和系统安全的机制。它不依赖于通货保障或是结算验证保障的中央权威。而区块链技术真正被业界所发现是在2013年，一经发现整个世界都在风靡，尤其在金融领域。至此以后区块链技术便好似搭上了高铁般进入了高速发展的阶段，后续的以太坊等项目陆续出现，引发了一波又一波的“币”和“链”潮。

接下来我们以区块链1.0的比特币为例介绍其中涉及的基础知识。

### 2.1.1 区块链结构

区块链是由包含交易信息的区块从后向前有序链接起来的数据结构。它可以被存储为flat file(一种包含没有相对关系记录的文件)，或是存储在一个简单数据库中。比特币核心客户端使用Google的LevelDB数据库存储区块链元数据[参考精通比特币 第二版]。

![图1](https://tva1.sinaimg.cn/large/007S8ZIlly1gdui1lb6duj31m80qe77k.jpg)


从图3可知，以上每个区块中包含的具体数据，其中分为两大类：区块头和区块体。

**区块头：**

- 版本：版本号，用于跟踪软件/协议的更新
- 父区块哈希值：引用区块链中父区块的哈希值
- Merkle根：该区块中交易的m erkle树根的哈希值
- 时间戳：该区块产生的近似时间(精确到秒的Unix时间戳)
- 难度目标：该区块工作量证明算法的难度目标
- Nonce：用于工作量证明算法的计数器

**区块体：**

- 交易：区块链中的每个区块都包含了产生于该区块的所有交易，且以Merkle树表示。


### 2.1.2 p2p网络

P2P的应用从下载MP3被人们“认识”起，迅速风靡世界，目前运营网络骨干流量的一半多都是P2P的流量，并且在文件共享、视频直播与点播、即时通(网上电话)、网络聊天、网络存储、网格计算等领域的应用发展神速。P2P的组网模式与开发模式已经成为互联网上最适合“自由者社区”的网络模式，随着网络的普及，互联网已经走过信息上网、信息搜索的阶段，而“社区型”信息搜索可能成为下一阶段的标志。

P2P的核心是数据存储在客户本地，通过存储信息(名称、地址、分块)的查询，让终端之间直接数据传递。P2P网络让网络上的数据流量分散化，同时管理点不仅没有服务容量的压力，而且只存储数据的索引与链接，不对数据本身负责，避免了版权与管理的麻烦。

比特币的每个网络节点以“扁平(flat)”的拓扑结构相互连通。 在P2P网络中不存在任何服务端(server)、中央化的服务、以及层级结构。P2P网络的节点之间交互运作、协同处 理:每个节点在对外提供服务的同时也使用网络中其他节点所提供的服务。P2P网络也因此具有可靠性、去中心化，以 及开放性。早期的国际互联网就是P2P网络架构的一个典型用例:IP网络中的各个节点完全平等。当今的互联网架构具 有分层架构，但是IP协议仍然保留了扁平拓扑的结构。

![一个包含四个完整功能的比特币网络节点:钱包、矿工、完整区块链、网络路由节点](https://tva1.sinaimg.cn/large/007S8ZIlly1gdul0snpa1j30x00u0x4z.jpg)

每个比特币节点都是路由、区块链数据库、挖矿、钱包服务的功能集合。

![具有多种节点类型、网关及协议的扩展比特币网络](https://tva1.sinaimg.cn/large/007S8ZIlly1gdul2q6fsqj312e0roe81.jpg)

比特币所采用的P2P网络架构不仅仅是选择拓扑结构这样简单。比特币被设计为一种点对点的数字现金系统，它的网络 架构既是这种核心特性的反映，也是该特性的基石。去中心化控制是设计时的核心原则，它只能通过维持一种扁平化、 去中心化的P2P共识网络来实现。比特币不同类型的网络节点通过P2P网络连接在前一起，构成了整个比特币分布式网络。


### 2.1.3 分布式存储

传统的分布式存储系统是分享分布式节点的存储资源，通过文件完整性证明和纠删码校验技术对数据存储方的数据进行分布式管理，全网的节点并不维护相同的存储信息得以降低冗余的一种分布式系统。比特币去中心化底层采用的技术就是区块链，其本质是一个分布式数据库，用于存储每一笔比特币交易记录，但是区块链系统中全网的节点维护相同的存储信息，这些信息都是冗余的，但是这样也有好处，所有拥有数据的节点都可以验证交易和把信息分享给其他的节点同事也保证了数据的备份，不怕数据的丢失。

有时候我们可以理解比特币的时候，我们把比特币系统比作一个记账的系统，在比特币网络中每个人都可以参与记账和数据校验，每个人都存储了所有的交易记录，就好似一个分布式的存储系统。但是像比特币这种区块链系统和传统的分布式存储系统有很多不同点。

|   |    	区块链|	分布式数据库|
|:----|:------|:-------|
| 架构  |	分布式 |	分布式|
|价值主张 |	数字化信任系统  |	高性能存储和访问|
|网络通信 |	peer-to-peer  |	client-server  |
|管理方式 | 集中管理	   | 分散管理         |
|数据结构 |	链式	      | 索引、等等        |
|节点关系 |	怀疑 & 制约    |	信任 & 协作   |
|一致性   |	共识算法	   | 主从复制         |
|数据持久 |	数据不可变      |	可修改 & 非持久 |
|性能     | 	低        |	高              |

## 2.2 密码学技术简介

密码学的英语单词是Cryptograghy，是由希腊单词 Kryptos（隐藏）和 Graphin（写）派生出来的，最初代表的意思是用来隐秘的传递信息。隐藏和写就是隐写，在古典密码学的发展中就有一门称为隐写术的技术，比如说藏头诗就是一种隐写术。在《巨人的陨落》中，艾瑟尔和弟弟比利就是通过每隔两个单词就会加一个单词来作为加密后的密文，这也是隐写术的一个例子。隐写术发展到今天演变为数字水印技术，一般在文件中加一个标识信息（即数字水印），可以起到追踪溯源，防伪和版权保护的作用。

在区块链的整个体系中大量使用了密码学算法，比如用于PoW的哈希算法，用于完整性验证的Merkle Tree，用于UTXO交易签名与验证的数字签名算法。

### 2.2.1 对称加密算法
        
对称加密也叫私钥加密，指加解密使用相同秘钥的加密算法。数据发信方将明文（原始数据）和加密密钥一起经过特殊加密算法处理后，使其变成复杂的加密密文发送出去。收信方收到密文后，若想解读原文，则需要使用加密用过的密钥及相同算法的逆算法对密文进行解密，才能使其恢复成可读明文。在对称加密算法中，使用的密钥只有一个，发收信双方都使用这个密钥对数据进行加密和解密，这就要求解密方事先必须知道加密密钥。因此对称算法的安全性依赖于密钥，泄漏密钥就意味着任何人都可以对他们发送或接收的消息解密，所以密钥的保密性对通信的安全性至关重要。

对称加密算法的特点是算法公开、计算量小、加密速度快、加密效率高。不足之处是，交易双方都使用同样钥匙，安全性得不到保证。此外，每对用户每次使用对称加密算法时，都需要使用其他人不知道的唯一钥匙，这会使得发收信双方所拥有的钥匙数量呈几何级数增长，密钥管理成为用户的负担。对称加密算法在分布式网络系统上使用较为困难，主要是因为密钥管理困难，使用成本较高。而与公开密钥加密算法比起来，对称加密算法能够提供加密和认证却缺乏了签名功能，使得使用范围有所缩小。
        
### 2.2.2 非对称算法

正因为对称密码系统存在如此难以解决的缺点，发展一种新的更有效更先进的密码体制显得更为迫切和必要。在这种情况下，1976：由W. Diffie和M. Hellman在《密码学的新方向》（《New Directions in Cryptography》）[10]提出了公钥密码学体制的思想。1978年：第一个公钥算法RSA算法[11]（由Ron Rivest、Adi Shamir和Leonard Adleman的姓氏首字母组成）。这种新的密码学体制突破性地解决了困扰着无数科学家的密钥分发问题，事实上，在这种体制中，人们甚至不用分发需要严格保密的密钥，这次突破同时也被认为是密码史上两千年来自单码替代密码发明以后最伟大的成就。

当代密码学的核心是公钥密码学，公钥密码学也称为非对称密码学，基本的意思就是在加密和解密的时候使用不同的秘钥，也就是key ，其中一个是公钥，是可以公开出去的，另外一个是私钥，要严格保密。但是公钥密码学的应用其实不局限于加密。公钥密码学要实现的功能有两个：一个是保密，发送者需要是用接收者的公钥去加密信息，接收者就用自己的私钥去解密信息。另外一个功能就是认证，发出信息的人用私钥去进行数字签名来签署信息，这样任何人拿到公钥之后都可以去确认信息是不是由私钥持有人发出的。所以，公钥密码学有两个应用，一个是加密通信，另外一个是数字签名。公钥密码学的安全源于基本的数学原理。公钥和私钥首先应该是有数学联系的，不然所谓的解密和签名操作也就不可能实现了，但是同时不能由公钥去算出私钥，如果可以算出来，那么安全性就丧失了。所以加密算法都是基于一些目前无解的数学问题，或者叫单向函数，例如整数分解或者离散对数。具体的算法有RSA和ECC等。

当新的加密货币钱包被创建时，就会生成一对密钥（公钥和私钥）。公共地址是使用公钥生成的，并可以安全的与他人共享。另一方面，私钥被用于创建数字签名和验证交易，所以必须要保密。当交易被数字签名中的认证散列验证之后，就可以被添加到区块链账本中。该数字签名系统确保了只有拥有加密货币钱包对应私钥的用户才能从钱包中获取资金。但值得注意的是，加密货币应用中所使用的非对称密码与计算机安全目的中所用的却不同。例如，比特币和以太坊所使用的是椭圆曲线数字签名算法（ECDSA）来验证交易。

### 2.2.3 哈希函数

在现代密码学中,哈希函数扮演着非常重要的角色，其在数字签名、密码保存等许多领域都有着比较广泛的应用。哈希函数（Hash Function），也叫做「散列」、「杂凑」函数或者算法。理论上讲，哈希函数就是一种数学流程，将任意大小的输入数据放入该流程，然后返回固定大小的输出数据。把输入数据压缩成摘要，使得数据量变小，将数据的格式固定下来。

更具体地讲，提取任意长度的字母序列作为输入（通常称为 string）进行杂糅、打乱混合，然后返回一个固定长度、格式的字母序列。无论这个输入 string 是单一字母、单词、句子还是整部小说，而输出的长度（叫做摘要 digest）永远相同。

当你使用任何一种网络服务创建需要密码的帐号时，此类密码都是通过哈希函数运行的，所存储的就是该密码信息的哈希摘要。当你输入密码以登陆帐号时，相同的哈希函数会去运行你输入的密码，然后服务器就会检查其结果是否与存储的摘要相匹配。这意味着黑客即使能够访问用于存储哈希的数据库，因无法轻易找到生成某一特定哈希的密码，所以不可能立即破解。

在比特币中，矿工的挖矿，区块中Merkle数，数据的校验，等都广泛的应用到了哈希函数。

### 2.2.4 密码学技术的发展

密码学早在公元前400多年就已经产生，人类使用密码的历史几乎与使用文字的时间一样长，密码学的发展大致可以分为3个阶段: 1949 年之前的古典密码学阶段; 1949 年至 1975 年密码学成为科学的分支; 1976 年以后对称密钥密码算法得到进一步发展，产生了密码学的新方向—公钥密码学。1976 年，W. Diffie和M. Hellman在发表的文章《New Directions in Cryptography》[9]中首次公开提出了公钥密码( Public-key Cryptography) 的概念。公钥密码的提出实现了加密密钥和解密密钥之间的独立，解决了对称密码体制中通信双方必须共享密钥的问题，在密码学界具有划时代的意义。

当今信息化时代提供了各种各样的安全性服务(如机密性、可信性(鉴别)、完整性、不可否认性 、可用性以及访问控制等)。这些公钥密码体制的安全性均依赖于数学难题(大整数分解难题和离散对数求解难题)的困难性．然而这些问题在量子计算情形下经过Shor算法均可变为易解问题——P问题，因而我们可以断言量子计算机出现之日，便是现今密码寿终正寝之日。量子密码术是一种新的重要加密方法,它利用单光子的量子性质,借助量子密钥分配协议可实现数据传输的可证性安全。因此，研究抗量子的计算的密码算法是未来密码学的新的研究方向。

## 2.3 共识算法

随着摩尔定律遇到瓶颈，越来越多情况下要依靠分布式架构，才能实现海量数据处理能力和可扩展计算能力。区块链系统，首先是一个分布式系统。传统单节点结构演变到分布式系统，碰到的首要问题就是一致性的保障。很显然，如果分布式集群无法保证处理结果一致的话，那任何建立于其上的业务系统都无法正常工作。一致性往往指分布式系统中多个副本对外呈现的数据的状态。如前面提到的顺序一致性、线性一致性，描述了多个节点对数据状态的维护能力。而共识则描述了分布式系统中多个节点之间，彼此对某个状态达成一致结果的过程。因此，一致性描述的是结果状态，共识则是一种手段。达成某种共识并不意味着就保障了一致性。

所谓共识，简单理解就是指大家都达成一致的意思。其实在现实生活中，有很多需要达成共识的场景，比如开会讨论，双方或多方签订一份合作协议等。而在区块链系统中，每个节点必须要做的事情就是让自己的账本跟其他节点的账本保持一致。如果是在传统的软件结构中，这几乎就不是问题，因为有一个中心服务器存在，也就是所谓的主库，其他的从库向主库看齐就行了。

在现实生活中，很多事情人们也都是按照这种思路来的，比如企业老板发布一个通知，员工照着做。但是区块链是一个分布式的对等网络结构，在这个结构中没有哪个节点是“老大”，一切都要商量着来。

所以在区块链系统中，如何让每个节点通过一个规则将各自的数据保持一致是一个很核心的问题，这个问题的解决方案就是制定一套共识算法。

### 2.3.1 PoW

工作量证明系统（或者说协议、函数），是一种应对拒绝服务攻击和其他服务滥用的经济对策。它要求发起者进行一定量的运算，也就意味着需要消耗计算机一定的时间。这个概念由Cynthia Dwork 和Moni Naor 1993年在学术论文中首次提出。而工作量证明（POW）这个名词，则是在1999年 Markus Jakobsson 和Ari Juels的文章《Proofs of Work and Bread Pudding Protocols》[12]中才被真正提出。

工作量证明(Proof Of Work，简称POW)应该算是最常见的共识算法之一，简单理解就是一份用来确认你做过一定量的工作的证明。监测工作的整个过程通常是极为低效的，而通过对工作的结果进行认证来证明完成了相应的工作量，则是一种非常高效的方式。比如现实生活中的毕业证、驾驶证等等，也是通过检验结果的方式（通过相关的考试）所取得的证明。

PoW 并非一个新理念，但是中本聪将 Pow 与加密签名、Merkle 链和 P2P 网络等已有理念结合，形成一种可用的分布式共识系统。加密货币是这样系统的首个基础和应用，因而独具创新性。

在 PoW 的工作方式中，区块链参与者（称为「矿工」）要在区块链中添加一块交易，必须解决某种「复杂但是无用」的计算问题。

本质上，这种做法可确保矿工花费了一些金钱或资源（矿机）完成工作，这表示了它们将不会损害区块链系统，因为对系统的损害也将会导致投资的损失，进而损害他们自身。

为保证运行区块时间不变，问题的复杂性会发生变化。有时，会存在多名矿工同时解决了问题。在这种情况下，每位矿工从中选取一个区块链，并以选取最长链者为获胜者。

因此，如果假定大多数矿工工作在同一个链上，那么成长最快的链将成为最长和最值得信任的链。这样，只要由矿工提交的工作有超过一半是值得信任的，那么加密货币就是安全的。

### 2.3.2 PoS

正是因为PoW算法在挖矿过程中对环境和电力的浪费极大，PoS才作为一种代替算法。

POS（Proof-of-Stake）[13]也称股权证明，类似于财产储存在银行，这种模式会根据你持有数字货币的量和时间，分配给你相应的利息。鉴于POW主要依赖于计算机硬件的稀缺性来防止女巫攻击，POS则主要依赖于区块链自身里的代币。在POW中，一个用户可能拿1000美元来买计算机，加入网络来挖矿产生新区块，从而得到奖励。

简单来说，就是一个根据你持有货币的量和时间，给你发利息的一个制度，在股权证明POS模式下，有一个名词叫币龄，每个币每天产生1币龄，比如你持有100个币，总共持有了30天，那么，此时你的币龄就为3000，这个时候，如果你发现了一个POS区块，你的币龄就会被清空为0。

你每被清空365币龄，你将会从区块中获得0.05个币的利息(假定利息可理解为年利率5%)，那么在这个案例中，利息 = 3000 * 5% / 365 = 0.41个币，这下就很有意思了，持币有利息。

然而，一旦币的权益被用于签名一个区块，则币龄将清为零，这样必须等待至少30日才能签署另一区块。同时，为防止非常老或非常大的权益控制区块链，寻找下一区块的最大概率在90天后达到最大值，这一过程保护了网络，并随着时间逐渐生成新的币而无需消耗大量的计算能力。

权益证明必须采用某种方法定义任意区块链中的下一合法区块，依据账户结余来选择将导致中心化，例如单个首富成员可能会拥有长久的优势。为此，人们还设计了其他不同的方法来选择下一合法区块。

### 2.3.3 PBFT

PBFT源于拜占庭将军问题，拜占庭将军问题是Leslie Lamport在10世纪80年代提出的一个假想问题。拜占庭是东罗马帝国的首都，由于当时拜占庭罗马帝国国土辽阔，每支军队的驻地分隔很远，将军们只能靠信使传递消息。发生战争时将军们必须制订统一的行动计划。然而，这些将军中有叛徒，叛徒希望通过影响统一行动计划的制定与传播，破坏忠诚的将军们一致的行动计划。因此，将军们必须有一个预定的方法协议，使所有忠诚的将军够达成一致。而且少数几个叛徒不能使忠诚的将军做出错误的计划。也就是说，拜占庭将军问题的实质就是要寻找一个方法，使得将军们在一个有版徒的非信任环境中建立对战斗计划的共识。

在分布式系统中，特别是在区块链网络环境中，也和拜占庭将军的环境类似，有运行正常的服务器（类似忠诚的拜占庭将军），还有故障的服务器，有破坏者的服务器（类似叛变的拜占庭将军）。共识算法的核心是在正常的节点间形成对网络状态的共识。

实用拜占庭容错（PBFT，Practical Byzantine Fault Tolerance）是首个提出的该问题解决方案，当前已被Hyperledger Fabric采用。PBFT使用了较少（少于 20 个，之后会稍有增加）的预选定将军数，因此运行非常高效。它的优点是高交易通量和吞吐量，但是不足之处在于是中心化的，并用于许可网络。

拜占庭容错系统是指：在一个拥有n台节点的系统，整个系统，对每个请求满足如下条件：

- 所有非拜占庭节点使用相同的输入信息，产生同样的结果；
- 如果输入的信息正确，那么所有非拜占庭节点必须接收这个信息，并计算相应的结果。

与此同时,在拜占庭系统的实际运行过程中一般假设系统中拜占庭节点不超过m台，并且对每个请求满足2个指标：

**安全性**——任何已经完成的请求都不会被更改，它可以在以后请求看到；
**活性**——可以接受并且执行非拜占庭客户端的请求，不会被任何因素影响而导致非拜占庭客户端的请求不能执行。

拜占庭系统目前普遍采用的假设条件包括: 

1. 拜占庭节点的行为可以是任意的，拜占庭节点之间可以共谋； 
2. 节点之间的错误是不相关的； 
3. 节点之间通过异步网络连接，网络中的消息可能丢失、乱序、延时到达； 
4. 服务器之间传递的信息,第三方可以知晓 ,但是不能窜改、伪造信息的内容和验证信息的完整性；

## 2.4 区块链技术的发展

回顾区块链技术的发展历史，我们便可以知道它也是站在巨人的肩膀上发展演变而来，其中最重要的便是密码学, p2p网络等技术的衍生品。从区块链技术的发展历程中我们可以把区块链技术分为三个阶段：区块链1.0、区块链2.0、 区块链3.0。

![](https://tva1.sinaimg.cn/large/007S8ZIlly1gdwx7zg9x7j30z00f6n6q.jpg)

### 2.4.1 区块链1.0

总所周知，比特币产生于一个化名为中本聪的人在2008年11月的时候发表的论文《Bitcoin: A Peer-to-Peer Electronic Cash System》[9]，2009年1月紧接着用他第一版的软件挖掘出了创始区块，包含着这句：“The Times 03/Jan/2009 Chancellor on brink of second bailout forbanks.”，像魔咒一样开启了比特币的时代。对于比特币的发展过程，有几个非常重要的时间节点：2010年9月，第一个矿场Slush发明了多个节点合作挖矿的方式，成为比特币挖矿这个行业的开端。在此之前的2010年5月，1万比特币才值25美元，如果按照这个价格来计算，全部的比特币（2100万）也就值5万美元，集中投入挖矿显然是没有任何意义的。因此，建立矿池的决定就意味着有人认定比特币未来将成为某种可以与真实世界货币相兑换的，具有无限增长空间的虚拟货币，这无疑是一种远见。

2011年4月，比特币官方有正式记载的（https://bitcoin.org/en/version-history） 第一个版本：0.3.21发布，这个版本非常初级，然而意义重大。首先，由于他支持uPNP，实现了了我们日常使用的P2P软件的能力，比特币才真正能登堂入室，进入寻常百姓家，让任何人都可以参与交易。其次，在此之前比特币节点最小单位只支持0.01比特币，相当于“分”，而这个版本真正支持了“聪”。可以说从这个版本之后，比特币才成为了现在的样子，真正形成了市场，在此之前基本上是技术人员的玩物。

2013年，比特币发布了0.8的版本，这是比特币历史上最重要的版本，它整个完善了比特币节点本身的内部管理、网络通讯的优化[14]。也就是在这个时间点以后，比特币才真正支持全网的大规模交易，成为中本聪设想的电子现金，真正产生了全球影响力。事情总是没有那么一帆风顺，在最重要的0.8版本，比特币引入了一个大bug，所以这个版本发布以后比特币短时间就出现了硬分叉，导致整个比特币最后不得不回退到旧的版本，这个也导致了比特币价格产生大幅下跌。比特币后面的发展被越来越多的人所熟知，例如：世界各国对它的态度、算力的增长——2016年1月达到1EH/S，以及在Github上超过了1万个相关的开源项目，都证明比特币生态环境已经完全成熟了。

从上面这些角度去看比特币的历史，也许你会产生和我相同的感受：不管中本聪的魔咒有多么强大，数字/密码学货币多么有前途，还要依靠软件本身一点一滴的发展。如果软件本身有致命bug，最终整个的系统都会变得毫无意义。


### 2.4.2 区块链2.0

在区块链2.0阶段，区块链技术的应用不再只是数字货币，而扩展到了一个去中心化的应用平台，该阶段的标志就是以太坊的出现。

2013年，创始人Vitalik Buterin发布了以太坊初版白皮书《以太坊：下一代智能合约和去中心话应用平台》，以太坊要做的是将区块链怎样应用于货币以外的领域。这个俄罗斯小伙子很早就在比特币领域做开发、新闻的报道，最后自立门户开发了以太坊。他的故事就好像一个年轻人为了学习盖世武功，加入了名门正派，苦心修炼多年，最后出来创立自己的武功，希望一统江湖、千秋万代。他从一开始所体现的就是目标宏大、处心积虑的设计，似乎要成为一统江湖、千秋万代的体系架构。让人感觉有点像前些年流行的玄幻小说。

以太坊的目标就是提供一个带有内置的成熟的图灵完备语言的区块链，用这种语言可以创建合约来编码任意状态转换功能，用户只要简单地用几行代码来实现逻辑，就能够创建以上提及的所有系统以及许多我们还想象不到的的其它系统。这种合约称之为智能合约（smart contract）。2014年4月， Gavin发表了以太坊黄皮书，作为以太坊虚拟机的技术说明。按照黄皮书中的具体说明，以太坊客户端已经用7种编程语言实现（C++, Go, Python, Java, JavaScript, Haskell, Rust）。并且做筹集资金开始预售以太币。以太币是以太坊货币单位，2015年正式启动。开始用的是工作量证明（proof-of-work）POW的算法，但未来可能考虑轉換成权益证明（proof-of-stake）POS。以太坊最重要的技术贡献就是智能合約。

随着区块链的发展，去中心化的模式变得越来越复杂。人们利用这一技术，在全球各地构建去中心化的组织或社区。这些去中心化的组织或社区不是完全的公有链，也称为联盟链或私有链。私有链，组织或社区构建的，只能得到内部少数人可以使用，信息不公开。联盟链则介于公有链和私有链之间，由若干组织或社区一起合作维护一条区块链，该区块链上有权限的管理，在若干组织之间公开。超级账本项目是首个面向企业的开放区块链技术的重要探索。在Linux基金会的支持下，吸引了包括IBM、Intel、摩根等在内的众多科技和金融巨头的参与。超级账本在之前的区块链技术基础上实现了完备的权限控制和安全保障。超级账本包括多个框架项目，其中广为人知的是Fabric项目，Fabric 致力在一个共识网络内，对指定资产资产的信息进行互换、维护和调阅。

### 2.4.3 区块链3.0

区块链3.0是指区块链在金融行业之外的各行业的应用场景.能够满足更加复杂的商业逻辑。区块链3.0被称为互联网技术之后的新一代技术创新，为各种行业提供去中心化解决方案的“可编程社会”，足以推动更大的产业改革。

在区块链1.0和区块链2.0的时代里，区块链只是小范围影响并造富了一批人，因其局限在货币、金融的行业中。区块链3.0涉及生活的方方面面，所以区块链3.0将更加的具有实用性，赋能各行业.不再依赖于第三方或某机构获取信任与建立信用.能够通过实现信任的方式提高整体系统的工作效率。

也可以说,区块链1.0是区块链技术的萌芽,区块链2.0是区块链在金融,智能合约方向的技术落地，而区块链3.0是为了解决各行各业的互信问题与数据传递安全性的技术落地与实现。区块链3.0将会赋予我们一个更大更宽阔的世界。未来的区块链3.0可能不止一个链一个币，是生态、多链构成的网络，类似于操作系统或类似于电脑全球的一个巨大的电脑的操作系统。

区块链的3.0时代，区块链的价值将远远超越货币、支付和金融这些经济领域，它将利用其优势重塑人类社会的方方面面。这是一场没有硝烟的革命。那我们要做的是，加速它，迎接它，拥抱它，最后改变这个世界吧！

# 区块链2.0-以太坊

以太坊是一个全新开放的区块链平台，它允许任何人在平台中建立和使用通过区块链技术运行的去中心化应用。就像比特币一样，以太坊不受任何人控制，也不归任何人所有——它是一个开放源代码项目，由全球范围内的很多人共同创建。和比特币协议有所不同的是，以太坊的设计十分灵活，极具适应性。在以太坊平台上创立新的应用十分简便，随着Homestead的发布，任何人都可以安全地使用该平台上的应用。

大约6年前，即2014年7月22日，以太坊开启众筹，点燃了开发者、初创企业、企业家和企业的辉煌岁月。6年后，区块链生态系统变得多样化、全球化、以及越来越分散化，并且在重要性、认可度和知名度等方面不断提高。

## 3.1 以太坊账户

比特币在设计中并没有账户（Account）的概念，而是采用了UTXO模型记录整个系统的状态。任何人都可以通过交易历史来推算出用户的余额信息。而以太坊则采用了不同的做法，直接用账户来记录系统状态。每个账户存储余额信息、智能合约代码和内部数据存储等。以太坊支持在不同的账户之间转移数据，以实现更为复杂的逻辑。

具体来看，以太坊账户分为两种类型：合约账户（Contracts Accounts）和外部账户（Externally Owned Accounts，或 EOA）。

- 合约账户：存储执行的智能合约代码，只能被外部账户来调用激活；
- 外部账户：以太币拥有者账户，对应到某公钥。账户包括 nonce、balance、storageRoot、codeHash 等字段，由个人来控制。

对于大部分用户来说，两者基本的区别在于外部账户是由人类用户掌控——因为他们能够控制私钥，进而控制外部账户。而合约账户则是由内部编码管控。如果他们是被人类用户“控制”的，那也是因为程序设定它们被具有特定地址的外部账户控制，进而被持有私钥的外部账户的人控制着。

只有当外部账户发出指令时，合约账户才会执行相应的操作。所以合约账户不可能自发地执行诸如任意数码生成或应用程序界面调用等操作—只有受外部账户提示时，它才会做这些事。这是因为以太坊要求节点能够与运算结果保持一致，这就要求保证严格确定执行。

和比特币一样，以太坊用户必须向网络支付少量交易费用。这可以使以太坊区块链免受无关紧要或恶意的运算任务干扰，比如分布式拒绝服务（DDoS）攻击或无限循环 。交易的发送者必须在激活的“程序”每一步付款，包括运算和记忆储存。费用通过以太坊自有的有价代币，以太币的形式支付。

## 3.2 以太币和燃料

以太币（Ether）是以太坊网络中的货币。以太币主要用于购买燃料，支付给矿工，以维护以太坊网络运行智能合约的费用。以太币最小单位是 wei，一个以太币等于 10^18 个 wei。以太币同样可以通过挖矿来生成，成功生成新区块的以太坊矿工可以获得 3 个以太币的奖励，以及包含在区块内交易的燃料费用。用户也可以通过交易市场来直接购买以太币。目前每年大约可以通过挖矿生成超过一千万个以太币，单个以太币的市场价格目前超过1000人民币。

燃料（Gas），控制某次交易执行指令的上限。每执行一条合约指令会消耗固定的燃料。当某个交易还未执行结束，而燃料消耗完时，合约执行终止并回滚状态。Gas 可以跟以太币进行兑换。需要注意的是，以太币的价格是波动的，但运行某段智能合约的燃料费用可以是固定的，通过设定 Gas 价格等进行调节。

交易费用由节点收集，节点使网络生效。这些“矿工”就是以太坊网络中收集、传播、确认和执行交易的节点。矿工们将交易分组——包括许多以太坊区块链中账户“状态”的更新——分成的组被称为“区块”，矿工们会互相竞争，以使他们的区块可以添加到下一个区块链上。矿工们每挖到一个成功的区块就会得到以太币奖励。这就为人们带来了经济激励，促使人们为以太坊网络贡献硬件和电力。

## 3.3 智能合约

智能合约（Smart Contract）是以太坊中最为重要的一个概念，即以计算机程序的方式来缔结和运行各种合约。最早在上世纪 90 年代，Nick Szabo 等人就提出过类似的概念，但一直依赖因为缺乏可靠执行智能合约的环境，而被作为一种理论设计。区块链技术的出现，恰好补充了这一缺陷。

以太坊支持通过图灵完备的高级语言（包括 Solidity、Serpent、Viper）等来开发智能合约。智能合约作为运行在以太坊虚拟机（Ethereum Virual Machine，EVM）中的应用，可以接受来自外部的交易请求和事件，通过触发运行提前编写好的代码逻辑，进一步生成新的交易和事件，可以进一步调用其它智能合约。

智能合约的执行结果可能对以太坊网络上的账本状态进行更新。这些修改由于经过了以太坊网络中的共识，一旦确认后无法被伪造和篡改。

## 3.4 以太坊虚拟机

以太坊是可编程的区块链。它并不是给用户一系列预先设定好的操作（例如比特币交易），而是允许用户按照自己的意愿创建复杂的操作。这样一来，它就可以作为多种类型去中心化区块链应用的平台，包括加密货币在内但并不仅限于此。

以太坊狭义上是指一系列定义去中心化应用平台的协议，它的核心是以太坊虚拟机（“EVM”），可以执行任意复杂算法的编码。在计算机科学术语中，以太坊是“图灵完备的”。开发者能够使用现有的JavaScript和Python等语言为模型的其他友好的编程语言，创建出在以太坊模拟机上运行的应用。

和其他区块链一样，以太坊也有一个点对点网络协议。以太坊区块链数据库由众多连接到网络的节点来维护和更新。每个网络节点都运行着以太坊模拟机并执行相同的指令。因此，人们有时形象地称以太坊为“世界电脑”。

这个贯穿整个以太坊网络的大规模并行运算并不是为了使运算更高效。实际上，这个过程使得在以太坊上的运算比在传统“电脑”上更慢更昂贵。然而，每个以太坊节点都运行着以太坊虚拟机是为了保持整个区块链的一致性。去中心化的一致使以太坊有极高的故障容错性，保证零停机，而且可以使存储在区块链上的数据保持永远不变且抗审查。

## 3.5 以太坊技术的展望

以太坊最大的变化是从工作量证明（PoW）向权益证明（PoS）的转变。这将改变新以太坊区块的产生方式以及网络的运行方式。Buterin认为，切换到权益证明机制将使外界攻击以太坊网络的成本更高。以太坊 1.0和新的PoS区块链马上将合并成一个区块链。

未来以太坊也会引入高级的密码学技术，包括抗量子攻击的密码学。以太坊还将引入其他工具，从而使网络可以为使用者提供更多的功能。按市值计算，以太坊是仅次于比特币的第二大区块链平台。目前的以太坊正处于巨大的变化中，在未来几年，它将进一步扩展，并支持更多的用户。

# 4 系统设计与开发

经过几年的发展，以太坊的技术体系已经趋于成熟，故本论文设计的电子投票系统将基于以太坊的智能合约开发一个投票DApp。以太坊的智能合约使用了solidity这种图灵完备的编程语言，相比比特币的操作指令容易很多，故我们只要使用solidity语言设计好我们的电子投票协议并编码实现即可。

## 4.1 投票需求分析

### 4.1.1 系统设计目标

电子投票相比传统的纸质投票方案无疑是巨大的进步，传统的电子投票和传统的线下投票方式相比的确解决了很多的问题，比如：

1. 需要提前规划统筹好，耗时耗力成效却不好；
2. 需要借助纸张来记录投票过程，浪费资源和破坏环境；
3. 需要人工来记录投票过程，需要人工来统计投票结果，浪费人力资源；
4. 需要依靠可信的第三方机构，实施复杂，成本高；

在学术方面，文献[15]中指出：电子投票一般都需要满足以下特性：

**隐私性:**

- 选票保密性 (BP): 任何攻击者都无法把用户所投的票和投票者的身份联系起来。
- 无收据性 (RF): 投票者在投票后不能证明他是怎么投票的。系统不允许投票者在投票后证明这些。
- 不可强制性 (CR): 任何攻击者都无法强制用户生成自己不想投的票据。 攻击者不会强迫选民得到相应的收据以供强迫者检查。

**可验证性:**

- 个体可验证性：每个投票者可以验证自己的投票是不是倍正确计入所有投票。
- 全局验证性：任何投票者都可以验证其他投票者所投票的合法性。

**不可重投性:**

- 不可重投性指的是，任何投票者无法对相同的消息进行两次投票。

**公平性:**

公平性指的是，任何人都无法提前知道选票的结果，以及无法影响选票的结果。实际上，隐私性和可验证性在一定程度上是互相矛盾的，保障可验证性的情况下就可能无法保证隐私，我们在电子投票的方面的目标是尽可能的保障以上的目标。

随着区块链技术的发展，无疑给电子投票领域带来了新的机遇。所以，设计一个系统是从隐私性和可验证性的角度上出发的，这也就解释了，为什么用区块链。区块链的去中心化、信任可靠匿名等的特性无疑都是和投票这种场景非常的匹配，本论文更是将基于区块链2.0--以太坊中的智能合约可编程的良好特性，故本论文设计的系统将带有以下特性：

1. 确保投票过程做到公开透明，所有的数据都可验证、可溯源;
2. 投票人均进行匿名投票，保护投票人的身份安全;
3. 投票人在完成投票后可确认自己的投票结果;
4. 不借助第三方信任机构，投票结果不可篡改;
5. 系统安全性高, 防止黑客的恶意攻击;

### 4.1.2 系统功能分析

本论文将设计一个完整的投票系统，当然我们首先会对使用用户进行调研，首先我们要对系统用户进行分类，首先我们需要投票发起人和投票的参与人。

投票发起人用例图：

![](https://tva1.sinaimg.cn/large/007S8ZIlly1gdy19z8fu9j30uu0iwq5w.jpg)

投票的参与人用例图：

![](https://tva1.sinaimg.cn/large/007S8ZIlly1gdy1io2fmmj30va0i6q60.jpg)

虽然投票的这种场景比较简单，面向的用户也不广泛，但是我们也要理清所有的需求，努力提供给用户很好的体验，把系统的各个方面都考虑到，提升系统的安全和性能。

## 4.2 系统基础架构

在投票系统中和用户交互的视图层中，我们主要使用web网页来展示，并使用bootstrap的UI框架，使用bootstrap中的栅格系统来对整体网页进行布局，同时使用bootstrap框架还具有响应式布局、移动设备优先。这样就可以给使用的用户提供一个更加扁平化更加简洁的图形界面。

在系统的逻辑层中，根据我们的需求，使用solidity语言编写智能合约，然后经过开发测试后就可以部署到以太坊网络上。本论文提供给用户的是可视化的web网页，但是需要借助chrome上的以太坊钱包MetaMask，所以在使用网页去调用以太坊上的合约之前需要先安装好MetaMask插件并创建和导入好自己的以太坊账户。web3.js是一个常用的以太坊API库，安装好浏览器的MetaMask插件就可以使用MetaMask内置的web3，这样我们就可以用自己的以太坊账户去使用本论文设计的投票DApp，这样就可以远程调用以太坊上的智能合约去参与投票。同时因为智能合约都是开源的，如果你有能力也可以使用其他语言的客户端去调用以太坊上的智能合约。

本论文的设计思路本就是基于以太坊区块链为底层，同时包括所有的投票记录和投票结果数据都依靠以太坊去中心化不可篡改的特性存储到区块链中，在不借助第三方认证机构的前提下就可以验证数据。

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gdzea9p4aoj31040k8dhj.jpg)

## 4.3 投票协议设计

solidity语言是编译型语言，所以最开始便要定义好所有需要的变量，梳理好我们投票系统的基本需求，我们需要定义如下变量：

1. string                     contractName： 记录智能合约名字
2. address                    publishAddr:   发布合约的以太坊用户地址
3. mapping(uint=>VoteProject) projectsMap：  记录创建所有的投票项目
4. uint                       projectsIndex：创建的投票项目的最大索引

虽然在solidity语言并不支持OOP，但是solidity中有结构体(struct)，我们可以根据不同的需要用结构体来构造复杂的数据类型：

1. VoteProject: 表示每个投票项目发布者发布的投票项目
2. Voter：表示每个投票参与者针对某个具体投票项目的详情
3. VoteRecord：针对某个投票项目，表示每个投票参与者具体的投票记录

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gdzdu4wup8j318g0k2tcp.jpg)

## 4.4 投票系统流程

根据以上的需求分析可以知道最核心的共有有三个：

1. 投票发布人
    - 创建投票工程
2. 投票参与人
    - 购买权重
    - 投票

### 4.4.1 创建投票工程流程

根据前文定义的`VoteProject`结构体，在创建投票工程的时候需要赋值很多参数，用户传递的参数有可能是不规范的，所以需要验证，但是其中最重要的就是`candidates`参数，我们需要验证其中的长度必须大于等于2。接下来初始化被选举人收到的投票总数列表，递增索引，最后创建投票项目。

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge3oefl1gfj30qe0uk410.jpg)

### 4.4.2 购买权重流程

当投票项目存在后，如果要给某个被选举对象投票，需要有投票权重，所以需要提前购买。购买投票权重时需要检查要购买权重的投票项目是否存在，接下来需要参考`VoteProject`的`weightPrice`和用户发送的以太数量计算可以购买的投票权重数量，然后判断该投票项目是否有足够的投票权重余额可以购买。最后也需要把购买者的权重余额加上新购买的权重和减去投票项目所拥有的投票权重余额。

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge3pa5oxqcj30nw0uu41z.jpg)

### 4.4.3 投票流程

本论文设计的投票系统中最核心的就是投票函数，所以梳理好投票的流程异常重要，同时要做好条件的过滤。针对投票的流程需要先判断是否存在这个投票项目，如果不存在肯定需要直接退出。然后检查目标投票对象是否存在，还要继续判断该投票项目是否开始或者已经结束。最后还要判断用户要投的权重是否超过了自己的权重余额。以上出现的所有条件如果有一个不满足则都会异常回滚，接下来需要添加被投票人的得票数，记录投票人投给人的投票数，添加投票记录到投票项目中。

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge42mwsclej310x0u0td3.jpg)

## 4.5 系统开发实践

在本论文前面已经对投票系统的主体架构和逻辑做出了梳理，接下来需要通过代码来实现这样一个投票系统。

### 4.5.1 开发工具及环境

代码编辑工具：Visual Studio Code、Remix Solidity IDE

Visual Studio Code（以下简称vscode）是一个轻量且强大的跨平台开源代码编辑器（IDE），支持Windows，OS X和Linux。内置JavaScript、TypeScript和Node.js支持，而且拥有丰富的插件生态系统，可通过安装插件来支持C++、C#、Python、PHP等其他语言。

Remix Solidity IDE 是一款基于浏览器的IDE，它用于开发智能合约，也是目前唯一以太坊官方比较推荐的一款开发以太坊智能合约的IDE，特别是对于新手来说。由于是基于浏览器的IDE，有一个很大的好处就是不用安装，也不用去安装Solidity运行环境，开箱即用。虽然remix是基于浏览器的但是也会提供强大的功能，比如：代码提示补全，代码高亮、代码警告、错误提示、运行日志输出、代码调试等功能。

使用编程语言：HTML，CSS，JavaScript，solidity

Solidity 是一门面向合约的、为实现智能合约而创建的高级编程语言。这门语言受到了 C++，Python 和 Javascript 语言的影响，设计的目的是能在以太坊虚拟机（EVM）上运行。Solidity是静态类型语言，支持继承、库和复杂的用户定义类型等特性。

第三方库和工具：web3.js，ganache, Truffle，solc.js，git，MetaMask

web3.js是以太坊JavaScript API的官方实现，用它来和以太坊节点进行可编程通讯，基于HTTP或IPC连接。web3.js 就是可以通过RPC调用本地或开房接口的远程以太坊节点，完成以太币转账、读写智能合约中的数据、创建智能合约等操作。本论文设计的电子投票系统就是用过web3.js来调用以太坊上的智能合约。

solc.js是solidity语言的编译器，我们可以使用solc来把solidity源代码编程成二进制程序和ABI对象。

Truffle是一个针对以太坊进行DApp的开发框架、测试框架。它对客户端做了深度集成。开发，测试，部署一行命令都可以搞定。不用再记那么多环境地址，繁重的配置更改，及记住诸多的命令。提供了控制台，使用框架构建后，可以直接在命令行调用输出结果，可极大方便开发调试。

MetaMask，一款浏览器插件钱包，不需下载安装客户端，只需添加至浏览器扩展程序即可使用，非常方便，并且可以很方便的调试和测试以太坊的智能合约。

### 4.5.2 solidity智能合约编写

根据前文投票协议的设计，首先我们需要定好以上三个结构体的内容：

VoteProject:

```solidity
struct VoteProject {
    address                   publishAddr;
    uint                      startTime;
    uint                      endTime;
    string                    name;
    uint                      allWeight;
    uint                      weightBalance;
    uint                      weightPrice;
    uint                      votedNumber;
    bytes32[]                 candidates;
    uint[]                    candidateReceive;
    mapping(uint=>VoteRecord) voted;
    mapping(address=>Voter)   voterInfo;
}
```

Voter：

```solidity
struct Voter {
    address voterAddress;
    uint    weightBalance;
    uint[]  weightForCandidate;
}
```


VoteRecord：

```solidity
struct VoteRecord {
    address     voterAddr;
    uint        weight;
    bytes32     votedName;
    uint        voteTime;
}
```

在定义以上的结构体数据的时候用到的一些复杂的结构：

比如：mapping(address=>Voter)。在solidity中支持一种**mapping**结构，这种map结构其本质就是一个哈希表(hash table)。

比如：uint[]。这种结构可能会被误以为他是数组（普通数组类型是不能动态扩展长度），但是在solidity语言中这种结构是一种可动态扩展长度的数组。

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ge1d1x8s5zj31bm0pqtet.jpg)

### 4.5.3 truffle开发框架

首先需要安装truffle框架，我们可以用node.js的包管理工具npm.

安装命令：

```bash
$ npm install -g truffle
```

初始化项目，初始化命令：
```bash
$ truffle unbox webpack
```

配置项目配置文件，使用本地的测试网络：

```javascript
module.exports = {
    development: {
     host: "127.0.0.1",     // 本地网络地址
     port: 8545,            // 网络端口
     network_id: "*",       // 任何网络
     gas: 6721975
    },
}
```

配置好合约的部署脚本：

```javascript
const FVoting = artifacts.require("FVoting");

module.exports = function(deployer) {
  deployer.deploy(FVoting, "FVoting",{gas: 6720000});
};
```

使用truffle框架封装的编译功能编译智能合约：

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ge5v05ya6aj310a08qaix.jpg)

通过图片可以看到编译好的合约放到了`./contract/`目录下，然后依靠前面配置的本地测试网络和部署脚本，那就可以用truffle框架进行自动部署：

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ge5vga9yukj30u00ue7wi.jpg)

### 4.5.4 以太坊API-web3.js

由于本论文设计的投票系统的交互页面是网页，那么就选web3.js库来调用以太坊上的智能合约。

首先需要加载浏览器中MetaMask中自带的provider：`window.ethereum`，先判断其是否存在，如果存在则使用这个provider然后新建web3对象：`new Web3(window.ethereum)`，我们是使用的MetaMask钱包的provider，所以还需要进行授权，授权过程如下所示：

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge4165e310j30k00ygjus.jpg)

如果`window.ethereum`不存在则说明用户自己的浏览器没有安装MetaMask以太坊钱包，这个时候需要显示警告信息提示用户先安装好MetaMask。

到目前为止还不能调用以太坊上的智能合约，接下来需要智能合约的ABI和部署地址，这样就可以获取合约实例，然后直接连接上以太坊上的智能合约并进行调用。

__*根据以上智能合约的方法图*__，其中有有三个重要的方法，所以在网页开发的时候偶需要用js去调用这三个方法，所以在js中定义如下三个方法来调用：

1. App.createVoteProject()：使用合约实例发布投票项目。
2. App.buyWeight()：使用合约实例购买投票权重。
3. App.voteForCandidate()：使用合约实例进行投票。

在调用合约的时候应该注意传参，特别是传递`bytes`类型的参数的时候应该把字符串进行utf-8编码以后再传递，否则就会报错。

### 4.5.5 前端网页开发

在前端网页部分，使用了webpack工具来打包前端资源。但是需要针对不同的资源需要对`webpack.config.js`进行配置。

根据前面的需求分析，在网页上需要呈现不同的数据，根据bootstrap的栅格系统进行如下的布局：

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge3nsztr9lj319n0u041g.jpg)

# 5 系统展示和测试

本论文前一章展示了基于区块链的投票系统的设计和开发，下面首先对系统各个功能进行展示，然后需要对系统进行测试，包括功能测试和单元测试。

## 5.1 系统展示

根据前文前段网页开发中对网页的设计，世纪开发出来的网页如下：

### 5.1.1 创建模块

所有的用户都可以根据自己的需求来创建投票项目，然后别人就可以参与你的投票项目了。

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge6b5oqn5mj30my0nygn3.jpg)

### 5.1.2 投票模块

在某个投票项目里面，如果你想给某个候选人投票直接输入他的名字然后加上要给他投的权重，但是你要记得自己的账户上面得先有这么多权重才可以，如果不够可以用以太币购买需要的投票权重。

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge648vieatj31340eqt9n.jpg)

### 5.1.3 投票详情

通过投票详情模块我们可以看到投票项目的基本信息，例如：投票开始时间、投票结束时间、项目名字等。另外还可以看到自己的账户信息，自己的以太币余额，地址和投票权重余额。

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge64l7rzglj31120u0aeb.jpg)

### 5.1.4 权重购买

如果要给某个候选人投票，首先需要要投票权重，我们可以通过次模块来购买投票权重。

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge693w1z4uj30p6064t93.jpg)

### 5.1.5 投票历史

本论文设计的投票系统都是有记录可查询的，所以得投票记录都被记录到了这个模块里面。

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge6a9y5te2j316e09i3zi.jpg)

## 5.2 自动单元测试

一个标准合格的软件工程项目测试环节也是非常重要的，同时软件测试中单元测试和功能测试时非常基础的测试项。Truffle使用Mocha测试框架和Chai断言来提供一个可靠的框架编写JavaScript测试，通过Truffle框架我们可以很容易的针对智能合约编写单元测试。

本论文设计的投票系统共有三个重要的流程，分别是：创建投票工程测试、权重购买测试、投票测试。分别对三个不同的流程编写三个不容的测试函数：

1. it("should be able to publish vote project"): 创建投票工程测试
2. it("should be able to buy vote weight"): 权重购买测试
3. it("should able to vote for candidate"): 投票测试

编写好单元测试后直接使用Truffle命令就可以开启测试：

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge74nf4y66j313q0fs1kx.jpg)


## 5.3 功能测试

本小节将通过功能测试来验证基于区块链的投票系统是否能够符合设计要求，验证存储到区块链系统中的数据是否正确，因为区块链系统的数据都是永久存储不可篡改的数据，所以保证系统的正确性非常重要。后面我们通过网页手动来进行功能测试。

### 5.3.1 创建投票工程测试

| 用例id   | case1          |
|:------- |:-------------   |
| 用例名称 | 创建投票工程      |
| 条件     |   具有以太币的账户  |
| 测试目的 |  用户是否可以正确新建投票工程 |
| 步骤    | 输入合法正确的数据，然后点击`Create` | 
| 预期结果 | 1. 创建成功 2. 创建失败 |
| 测试数据 | 项目名字： 测试投票项目、开始时间：1587273775、结束时间：1589293775，权重价格：0.001、权重总量：10000、候选人：["投票测试人1", "投票测试人2", "投票测试人3", "投票测试人4"] |
| 测试结果 | 测试投票项目成功创建 |

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge78znkznyj31hj0u0wlj.jpg)

### 5.3.2 权重购买测试

| 用例id   | case2          |
|:------- |:-------------   |
| 用例名称 | 购买权重      |
| 条件     |   投票项目已经存在，具有以太币的账户  |
| 测试目的 |  用户可以根据自己的购买需要的权重 |
| 步骤    | 输入想要该买的数量，点击`Buy`| 
| 预期结果 | 1. 购买成功 2. 购买失败 |
| 测试数据 | 购买数量：1000 |
| 测试结果 | 购买成功 |

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge78l2mjglj31tm0ssgrr.jpg)

### 5.3.3 投票测试

| 用例id   | case2          |
|:------- |:-------------   |
| 用例名称 | 投票      |
| 条件     |   投票项目已经存在，投票权重足够  |
| 测试目的 |  用户可以给候选人投票 |
| 步骤    | 输入候选人名字，点击`Vote`| 
| 预期结果 | 1. 投票成功 2. 投票失败 |
| 测试数据 | 候选人名：投票测试人2、投票权重：100 |
| 测试结果 | 投票成功 |

![](https://tva1.sinaimg.cn/large/007S8ZIlly1ge79q9sm8zj310l0u0q89.jpg)

# 6 总结与展望

## 6.1 总结

本论文是基于区块链为基础，把区块链的特性运用到了投票场景，我们使用到了很多区块链的很多特性，比如：去中心化，数据永久存储不可篡改等。选择以太坊为公链，在其之上使用智能合约开发一个安全公平的投票系统，开发图形化交互网页调用智能合约加强用户体验。

本论文主要完成了一下工作：

1. 巧妙的应用区块链技术。区块链是分布式数据存储、点对点传输、共识机制、加密算法等计算机技术的新型应用模式。区块链技术是利用块链式数据结构来验证与存储数据、利用分布式节点共识算法来生成和更新数据、利用密码学的方式保证数据传输和访问的安全、利用由自动化脚本代码组成的智能合约来编程和操作数据的一种全新的分布式基础架构与计算方式。由于数据是加密的，并且分布在许多不同的计算机上，所以它允许创建防篡改、高度健壮的数据库，本论文正是利用了区块链这样的特性，才把投票系统构建其之上。
2. 深入以太坊技术掌握以太坊开发。尽管比特币是区块链技术的第一个应用，但它仍然只是一种货币。而以太坊带来了区块链技术的全部可能性。简单来说，以太坊的设计之初就瞄准成为未来区块链应用的终极软件平台。如果未来去中心化和dAPPs普及，那么以太坊必定会成为未来的核心平台技术。区块链的技术还正在发展之中，当然以太坊也在不断的推陈出新，区块链技术或许在未来会大规模的应用到我们的生活之中。
3. 设计开发全新的投票系统。因为软件是给用户来使用的，故我们需要深入挖掘用户的实际需求这样才能开发出体验良好的软件。首先需要分析电子投票的这种场景，寻找本系统需要的需求，设计本系统的基础架构，设计投票协议，梳理投票等流程。通过对以太坊技术的学习，用solidity语言实现投票系统的需求，然后把写好的智能合约部署到本地的以太坊测试网络中，并开发了图形化的web网页交互接口来提升用户的使用体验。
4. 完成了一个基本的系统测试，在一个成熟的软件体系中软件的测试非常繁多，例如：白盒测试、黑盒测试、单元测试、渗透测试等等。在本论文中只是对系统完成了基本的单元测试和功能测试。而且也需要对软件在不同的环境中进行测试，比如在最开始是开发人员在本地开发环境中的单元测试，然后是专业的软件测试工程师在测试环境中的测试，后续还有在devops系统中配置的自动测试等等。最后验证了本投票系统的可行性和正确性，提高了软件的可靠性。

## 6.2 展望

信息技术的广泛应用促进了人们的工作效率和生活质量的提高，人们的工作方式和学习方式也正发生转变。足不出户可知天下事，人不离家照样能办事。一部分人可以由原来的按时定点上班变为可以在家上班，网上授课，网上学习，网上会议，网上购物，网上洽谈生意，网上娱乐等成为人们一种新型的生活方式。

各种传统事物都被记录到信息系统中，经过计算然后进行高速传播，本论文探索了信息技术在投票场景中的应用。随着区块链技术在国内外的不断发展，学者们发展区块链系统去中心化、不可篡改等的特性在投票场景中非常合适，推出了很多基于区块链的投票系统。在前人的基础上本设计基于以太坊技术设计开发了可信安全的投票系统，在区块链的底层目前的以太坊采用的是PoW的共识算法，在算法上还有很大的提升空间，以太坊的底层性能还不算太好如果网络流量过大也会造成网络拥堵，未来可以更加优化以太坊的底层性能，提升投票系统整体的网络吞吐量。目前投票系统还没有对投票参与人进行审核的功能，因为很多的投票场景中需要对投票参与人进行审核和限定，后续应该加上审核参与人的功能。投票系统现在也没有用户登录注册的功能，虽然这个功能不是核心，但是可以保证我们对投票用户的身份鉴别。本身对前端技术不是很精通，很多网页的渲染都是用过原生JS来完成的这样代码格式非常的乱，无端增加了后续研发的成本，同时所有的数据都堆砌到同一个页面上了，显得异常繁多，后续可以开发多个页面，然后多个页面进行跳转。没有调查就没有发言权[16]，随着更加安全的电子投票系统推出，未来一定会广泛的使用电子投票。

而随着区块链的产生，可以第一次用技术的手段，解决了交易的信任问题，第一次用技术实现了为交易背书，通过互联网与区块链的结合，可以产生类似互联网和共识协议的效果。价值互享的核心是要实现资产的互联互通和自由交易。如果要把全社会的资产都搬上链，除了需要一个完全开放的平台，还需要资金的安全和资产的定价。区块链技术正好可以给出一个完美的解决方案，去中心化的网络。而商业巨头在保证数据安全的前提下，可以同合作伙伴进行数据的互联和共享。加密技术可以保证资产的快速验证，可以比传统系统更快更安全的完成支付、确权以及资产的交割等问题。而区块链用自身的优势，保证了价值互享网络的信息公开、透明、准确等特性，并保护了参与者的隐私和数据安全。在未来的某一天，基于区块链技术的价值互相网络，将会作为生产关系的一部分，对生产力产生巨大的影响。因此，从宏观意义上讲，区块链技术可能是一种对人类未来社会产生重大变革的技术。

# 参考文献

[1] Chaum D L. Untraceable electronic mail, return addresses, and digital pseudonyms[J].Communications of the ACM，1981，4(2)：84-88.
[2] MERRITT M J. Cryptographic protocols[C]//The Fourteenth ACM Symposium on Theory of Computing.1982: 382-400.
[3] Fujioka A, Okamoto T, Ohta K. A practical secret voting scheme for large scale elections[J].Proc Auscrypt92 Gold Coast Queensland Australia Dec, 1992, 718:244-251.
[4] 张江霄，李舟军，刘霞，等. 基于群盲签名的多授权电子投票系统[J]. 中国科技论文，2015，(8):980-983.
[5] 王泽成，斯桃枝，李志斌，等. 基于身份的代理签名和盲签名[J]. 计算机工程与应用，2003,39(23): 148- 150.
[6] Zhao Z,Chan T H H.How to Vote Privately Using Bitcoin[J].Computers&Education,2015，(69)：514-516.
[7] McCorry Pshahandashti S F, Hao F. A smart contract for boardroom voting with maximum voter privacy[C]//Financial Cryptography and Data Security.2017.
[8] 周平，杜宇，李斌. 中国区块链技术和应用发展白皮书[R].北京:工业和信息化部，2016.
[9] Satoshi N. Bitcoin: A Peer-to-Peer Electronic Cash System[DB/OL]. Satoshi N,2008. https://bitcoin.org/bitcoin.pdf.
[10] Diffie W, Hellman M. New Directions in Cryptography[J]. IEEE TRANSACTIONS ON INFORMATION THEORY,1976,22(6):644-654.
[11] Rivest R，Shamir A，Adleman L. A method for obtaining digital signatures and public-key cryptosystems[J], Communications of the ACM,1977,21（2）：120–126.
[12] Jakobsson M, Juels A. Proofs of Work and Bread Pudding Protocols[C]//Preneel B.International Federation for Information Processing.USA:KLUWER ACADEMIC PUBLISHERS,1999:258-272.
[13] Sunny K, Scott N. PPCoin: Peer-to-Peer Crypto-Currency with Proof-of-Stake.Sunny K,1999. https://decred.org/research/king2012.pdf.
[14] Andreas M A.精通比特币.第2版（影印版）[M].南京:南京东南大学出版社,2018:245-567.
[15] Jonker H, Mauw S, Pang J. Privacy and verifiability in voting systems: Methods, developments and trends[J]. Computer Science Review, 2013,(10):1-30.
[16]胡浩. 基于区块链的投票系统的设计与开发[D]. 南京邮电大学，2018.


[x] Southeast University Press
专著：作者.书名.版本(第1版不著录)[M].出版地:出版者,出版年:引用起止页码.
